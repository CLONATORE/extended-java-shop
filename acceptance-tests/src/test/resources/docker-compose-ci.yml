version: '2'
services:
  shopfront:
    image: quiram/shopfront
    ports:
     - "8010:8010"
    depends_on:
      - productcatalogue
      - stockmanager
      - featureflags
    links:
      - productcatalogue
      - stockmanager
      - featureflags
    networks:
      - ci_acceptance_test_network
  productcatalogue:
    image: quiram/productcatalogue
    ports:
     - "8020:8020"
    networks:
      - ci_acceptance_test_network
  stockmanager:
    image: quiram/stockmanager
    ports:
     - "8030:8030"
    networks:
      - ci_acceptance_test_network
  featureflags:
    image: quiram/featureflags
    ports:
     - "8040:8040"
    depends_on:
     - featureflags-db
    links:
     - featureflags-db
    networks:
      - ci_acceptance_test_network
  featureflags-db:
    image: quiram/featureflags-db
    ports:
     - "5432:5432"
    networks:
      - ci_acceptance_test_network

networks:
  ci_acceptance_test_network:
    driver: bridge
    ipam:
      config:
        - subnet: 172.20.0.0/16
